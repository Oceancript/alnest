{%- if section.settings.enable_language_selector and localization.available_languages.size > 1 -%}
  {%- form 'localization', id: 'localization_form_tag', class: 'lang-switcher-form' -%}
    <div class="localization-form__buttons">
      {% for language in localization.available_languages %}
        <button id="locale_item_{{ language.iso_code }}" class="localization-button link" lang="{{ language.iso_code }}" >{{ language.endonym_name | capitalize }}</button>
      {% endfor %}
    </div>
  {%- endform -%}
{% endif %}

<script>
  document.querySelectorAll(".localization-button").forEach(item => {
    item.addEventListener("click", event => {
      // Получаем код языка из атрибута lang кнопки
      var langCode = item.getAttribute("lang");
      // Устанавливаем значение поля формы на код языка
      document.querySelector("#localization_form_tag [name='locale_code']").value = langCode;
      // Отправляем форму
      document.getElementById("localization_form_tag").submit();
    });
  });
</script>